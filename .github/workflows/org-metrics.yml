name: Org Profile Metrics (optional)

on:
  schedule:
    - cron: "0 0 * * 1" # weekly
  workflow_dispatch:

jobs:
  metrics:
    runs-on: ubuntu-latest
    steps:
      - name: Generate org metrics
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }} # PAT with read:user + read:org (and repo if private)
          user: AethorStudios
          template: classic
          base: header, repositories
          config_timezone: "UTC"
          repositories_affiliations: owner, collaborator
          plugin_topics: yes
          plugin_topics_limit: 12
          plugin_repositories: yes

# Setup:
# 1) Create a PAT with scopes: read:user, read:org (add repo for private repos)
# 2) Add it as a secret METRICS_TOKEN (organization or repo secret)
# 3) Ensure the .github repo exists in AethorStudios and this workflow is committed
# 4) Run the workflow from Actions or wait for schedule
